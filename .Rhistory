18, 19, 933, # Each row represents a link. The first number
19, 20, 482, # the second number represents the node connected to.
20, 21, 57,
21, 22, 27,
22, 23, 7,
24, 25, 929, # Each row represents a link. The first number
25, 26, 498, # the second number represents the node connected to.
26, 27, 35,
27, 28, 10,
28, 29, 6
),# The third number is the value of the node
byrow = TRUE, ncol = 3))
names(links) = c("source", "target", "value")
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 14, nodeWidth = 10, iterations = 0)
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 14, nodeWidth = 10, iterations = 0, sinksRight=FALSE)
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 14, nodeWidth = 10, iterations = 0, align='left')
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 14, nodeWidth = 17, iterations = 0, align='left')
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 14, nodeWidth = 17, iterations = 0)
Make a connection data frame
links <- data.frame(
source=c("group_A","group_A", "group_B", "group_C", "group_C", "group_E"),
target=c("group_C","group_D", "group_E", "group_F", "group_G", "group_H"),
value=c(2,3, 2, 3, 1, 3)
)
s = c("Year: ", "Applicants\n: ", "Wrote exam: ", "Interviewed: ", "Qualified: ",
"offers: ")
v1 = c(2000, 242, 178, 79,42, 42)
v2 = c(2001, 403, 214, 103, 56, 53)
v3 = c(2002, 916, 431, 90, 38, 37)
v4 = c(2003, 933, 482, 57, 27, 7)
v5 = c(2004, 929, 498, 35, 10, 6)
nodes = data.frame("name" =
c(paste(s,v1), # Node 0 to 5
paste(s,v2),# 6 to 11))
paste(s,v3), # 12 to 17
paste(s,v4), # 18, 23
paste(s,v5) # 24 to 29
))
links = as.data.frame(matrix(c(
0, 1, 242, # Each row represents a link. The first number
1, 2, 178, # the second number represents the node connected to.
2, 3, 79,
3, 4, 42,
4, 5, 42,
6, 7, 403, # Each row represents a link. The first number
7, 8, 214, # the second number represents the node connected to.
8, 9, 103,
9, 10, 56,
10, 11, 53,
12, 13, 916, # Each row represents a link. The first number
13, 14, 431, # the second number represents the node connected to.
14, 15, 90,
15, 16, 38,
16, 17, 37,
18, 19, 933, # Each row represents a link. The first number
19, 20, 482, # the second number represents the node connected to.
20, 21, 57,
21, 22, 27,
22, 23, 7,
24, 25, 929, # Each row represents a link. The first number
25, 26, 498, # the second number represents the node connected to.
26, 27, 35,
27, 28, 10,
28, 29, 6
),# The third number is the value of the node
byrow = TRUE, ncol = 3))
names(links) = c("source", "target", "value")
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 14, nodeWidth = 17, iterations = 0)
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 14, nodeWidth = 17, iterations = 0)
# From these flows we need to create a node data frame: it lists every entities involved in the flow
nodes <- data.frame(
name=c(as.character(links$source), as.character(links$target)) %>%
unique()
)
# With networkD3, connection must be provided using id, not using real name like in the links dataframe.. So we need to reformat it.
links$IDsource <- match(links$source, nodes$name)-1
links$IDtarget <- match(links$target, nodes$name)-1
# prepare color scale: I give one specific color for each node.
my_color <- 'd3.scaleOrdinal() .domain(["group_A", "group_B","group_C", "group_D", "group_E",
"group_F", "group_G", "group_H"]) .range(["blue", "blue" , "blue", "red", "red", "yellow",
"purple", "purple"])'
# Make the Network. I call my colour scale with the colourScale argument
#p <- sankeyNetwork(Links = links, Nodes = nodes, Source = "IDsource", Target = "IDtarget",
#                   Value = "value", NodeID = "name", colourScale=my_color)
p <- sankeyNetwork(Links = links, Nodes = nodes, Source = "IDsource", Target = "IDtarget",
Value = "value", NodeID = "name")
p
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 14, nodeWidth = 17, iterations = 0)
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 10, nodeWidth = 17, iterations = 0)
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 17, nodeWidth = 17, iterations = 0)
library(networkD3)
library(dplyr)
# Make a connection data frame
links <- data.frame(
source=c("group_A","group_A", "group_B", "group_C", "group_C", "group_E"),
target=c("group_C","group_D", "group_E", "group_F", "group_G", "group_H"),
value=c(2,3, 2, 3, 1, 3)
)
s = c("Year: ", "Applicants\n: ", "Wrote exam: ", "Interviewed: ", "Qualified: ",
"offers: ")
v1 = c(2000, 242, 178, 79,42, 42)
v2 = c(2001, 403, 214, 103, 56, 53)
v3 = c(2002, 916, 431, 90, 38, 37)
v4 = c(2003, 933, 482, 57, 27, 7)
v5 = c(2004, 929, 498, 35, 10, 6)
nodes = data.frame("name" =
c(paste(s,v1), # Node 0 to 5
paste(s,v2),# 6 to 11))
paste(s,v3), # 12 to 17
paste(s,v4), # 18, 23
paste(s,v5) # 24 to 29
))
links = as.data.frame(matrix(c(
0, 1, 242, # Each row represents a link. The first number
1, 2, 178, # the second number represents the node connected to.
2, 3, 79,
3, 4, 42,
4, 5, 42,
6, 7, 403, # Each row represents a link. The first number
7, 8, 214, # the second number represents the node connected to.
8, 9, 103,
9, 10, 56,
10, 11, 53,
12, 13, 916, # Each row represents a link. The first number
13, 14, 431, # the second number represents the node connected to.
14, 15, 90,
15, 16, 38,
16, 17, 37,
18, 19, 933, # Each row represents a link. The first number
19, 20, 482, # the second number represents the node connected to.
20, 21, 57,
21, 22, 27,
22, 23, 7,
24, 25, 929, # Each row represents a link. The first number
25, 26, 498, # the second number represents the node connected to.
26, 27, 35,
27, 28, 10,
28, 29, 6
),# The third number is the value of the node
byrow = TRUE, ncol = 3))
names(links) = c("source", "target", "value")
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 17, nodeWidth = 17, iterations = 0)
library(networkD3)
library(dplyr)
# Make a connection data frame
links <- data.frame(
source=c("group_A","group_A", "group_B", "group_C", "group_C", "group_E"),
target=c("group_C","group_D", "group_E", "group_F", "group_G", "group_H"),
value=c(2,3, 2, 3, 1, 3)
)
s = c("", "Applicants\n: ", "Wrote exam: ", "Interviewed: ", "Qualified: ",
"offers: ")
v1 = c(2000, 242, 178, 79,42, 42)
v2 = c(2001, 403, 214, 103, 56, 53)
v3 = c(2002, 916, 431, 90, 38, 37)
v4 = c(2003, 933, 482, 57, 27, 7)
v5 = c(2004, 929, 498, 35, 10, 6)
nodes = data.frame("name" =
c(s#paste(s,v1), # Node 0 to 5
paste(s,v2),# 6 to 11))
paste(s,v3), # 12 to 17
paste(s,v4), # 18, 23
paste(s,v5) # 24 to 29
))
links = as.data.frame(matrix(c(
0, 1, 242, # Each row represents a link. The first number
1, 2, 178, # the second number represents the node connected to.
2, 3, 79,
3, 4, 42,
4, 5, 42,
6, 7, 403, # Each row represents a link. The first number
7, 8, 214, # the second number represents the node connected to.
8, 9, 103,
9, 10, 56,
10, 11, 53,
12, 13, 916, # Each row represents a link. The first number
13, 14, 431, # the second number represents the node connected to.
14, 15, 90,
15, 16, 38,
16, 17, 37,
18, 19, 933, # Each row represents a link. The first number
19, 20, 482, # the second number represents the node connected to.
20, 21, 57,
21, 22, 27,
22, 23, 7,
24, 25, 929, # Each row represents a link. The first number
25, 26, 498, # the second number represents the node connected to.
26, 27, 35,
27, 28, 10,
28, 29, 6
),# The third number is the value of the node
byrow = TRUE, ncol = 3))
names(links) = c("source", "target", "value")
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 17, nodeWidth = 17, iterations = 0)
#--------------------------------------------------------------------
library(networkD3)
library(dplyr)
# Make a connection data frame
links <- data.frame(
source=c("group_A","group_A", "group_B", "group_C", "group_C", "group_E"),
target=c("group_C","group_D", "group_E", "group_F", "group_G", "group_H"),
value=c(2,3, 2, 3, 1, 3)
)
s = c("", "Applicants\n: ", "Wrote exam: ", "Interviewed: ", "Qualified: ",
"offers: ")
v1 = c(2000, 242, 178, 79,42, 42)
v2 = c(2001, 403, 214, 103, 56, 53)
v3 = c(2002, 916, 431, 90, 38, 37)
v4 = c(2003, 933, 482, 57, 27, 7)
v5 = c(2004, 929, 498, 35, 10, 6)
nodes = data.frame("name" =
c(s#paste(s,v1), # Node 0 to 5
paste(s,v2),# 6 to 11))
paste(s,v3), # 12 to 17
paste(s,v4), # 18, 23
paste(s,v5) # 24 to 29
))
links = as.data.frame(matrix(c(
0, 1, 242, # Each row represents a link. The first number
1, 2, 178, # the second number represents the node connected to.
2, 3, 79,
3, 4, 42,
4, 5, 42,
6, 7, 403, # Each row represents a link. The first number
7, 8, 214, # the second number represents the node connected to.
8, 9, 103,
9, 10, 56,
10, 11, 53,
12, 13, 916, # Each row represents a link. The first number
13, 14, 431, # the second number represents the node connected to.
14, 15, 90,
15, 16, 38,
16, 17, 37,
18, 19, 933, # Each row represents a link. The first number
19, 20, 482, # the second number represents the node connected to.
20, 21, 57,
21, 22, 27,
22, 23, 7,
24, 25, 929, # Each row represents a link. The first number
25, 26, 498, # the second number represents the node connected to.
26, 27, 35,
27, 28, 10,
28, 29, 6
),# The third number is the value of the node
byrow = TRUE, ncol = 3))
names(links) = c("source", "target", "value")
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 17, nodeWidth = 17, iterations = 0)
#--------------------------------------------------------------------
library(networkD3)
library(dplyr)
# Make a connection data frame
links <- data.frame(
source=c("group_A","group_A", "group_B", "group_C", "group_C", "group_E"),
target=c("group_C","group_D", "group_E", "group_F", "group_G", "group_H"),
value=c(2,3, 2, 3, 1, 3)
)
s = c(" ", "Applicants\n: ", "Wrote exam: ", "Interviewed: ", "Qualified: ",
"offers: ")
v1 = c(2000, 242, 178, 79,42, 42)
v2 = c(2001, 403, 214, 103, 56, 53)
v3 = c(2002, 916, 431, 90, 38, 37)
v4 = c(2003, 933, 482, 57, 27, 7)
v5 = c(2004, 929, 498, 35, 10, 6)
nodes = data.frame("name" =
c(s#paste(s,v1), # Node 0 to 5
paste(s,v2),# 6 to 11))
paste(s,v3), # 12 to 17
paste(s,v4), # 18, 23
paste(s,v5) # 24 to 29
))
links = as.data.frame(matrix(c(
0, 1, 242, # Each row represents a link. The first number
1, 2, 178, # the second number represents the node connected to.
2, 3, 79,
3, 4, 42,
4, 5, 42,
6, 7, 403, # Each row represents a link. The first number
7, 8, 214, # the second number represents the node connected to.
8, 9, 103,
9, 10, 56,
10, 11, 53,
12, 13, 916, # Each row represents a link. The first number
13, 14, 431, # the second number represents the node connected to.
14, 15, 90,
15, 16, 38,
16, 17, 37,
18, 19, 933, # Each row represents a link. The first number
19, 20, 482, # the second number represents the node connected to.
20, 21, 57,
21, 22, 27,
22, 23, 7,
24, 25, 929, # Each row represents a link. The first number
25, 26, 498, # the second number represents the node connected to.
26, 27, 35,
27, 28, 10,
28, 29, 6
),# The third number is the value of the node
byrow = TRUE, ncol = 3))
names(links) = c("source", "target", "value")
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 17, nodeWidth = 17, iterations = 0)
#--------------------------------------------------------------------
library(networkD3)
library(dplyr)
# Make a connection data frame
links <- data.frame(
source=c("group_A","group_A", "group_B", "group_C", "group_C", "group_E"),
target=c("group_C","group_D", "group_E", "group_F", "group_G", "group_H"),
value=c(2,3, 2, 3, 1, 3)
)
s = c(" ", "Applicants\n: ", "Wrote exam: ", "Interviewed: ", "Qualified: ",
"offers: ")
v1 = c(2000, 242, 178, 79,42, 42)
v2 = c(2001, 403, 214, 103, 56, 53)
v3 = c(2002, 916, 431, 90, 38, 37)
v4 = c(2003, 933, 482, 57, 27, 7)
v5 = c(2004, 929, 498, 35, 10, 6)
nodes = data.frame("name" =
c(s,#paste(s,v1), # Node 0 to 5
paste(s,v2),# 6 to 11))
paste(s,v3), # 12 to 17
paste(s,v4), # 18, 23
paste(s,v5) # 24 to 29
))
links = as.data.frame(matrix(c(
0, 1, 242, # Each row represents a link. The first number
1, 2, 178, # the second number represents the node connected to.
2, 3, 79,
3, 4, 42,
4, 5, 42,
6, 7, 403, # Each row represents a link. The first number
7, 8, 214, # the second number represents the node connected to.
8, 9, 103,
9, 10, 56,
10, 11, 53,
12, 13, 916, # Each row represents a link. The first number
13, 14, 431, # the second number represents the node connected to.
14, 15, 90,
15, 16, 38,
16, 17, 37,
18, 19, 933, # Each row represents a link. The first number
19, 20, 482, # the second number represents the node connected to.
20, 21, 57,
21, 22, 27,
22, 23, 7,
24, 25, 929, # Each row represents a link. The first number
25, 26, 498, # the second number represents the node connected to.
26, 27, 35,
27, 28, 10,
28, 29, 6
),# The third number is the value of the node
byrow = TRUE, ncol = 3))
names(links) = c("source", "target", "value")
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 17, nodeWidth = 17, iterations = 0)
#--------------------------------------------------------------------
library(networkD3)
library(dplyr)
# Make a connection data frame
links <- data.frame(
source=c("group_A","group_A", "group_B", "group_C", "group_C", "group_E"),
target=c("group_C","group_D", "group_E", "group_F", "group_G", "group_H"),
value=c(2,3, 2, 3, 1, 3)
)
s = c("", "Applicants\n: ", "Wrote exam: ", "Interviewed: ", "Qualified: ",
"offers: ")
v1 = c(2000, 242, 178, 79,42, 42)
v2 = c(2001, 403, 214, 103, 56, 53)
v3 = c(2002, 916, 431, 90, 38, 37)
v4 = c(2003, 933, 482, 57, 27, 7)
v5 = c(2004, 929, 498, 35, 10, 6)
nodes = data.frame("name" =
c(s,#paste(s,v1), # Node 0 to 5
paste(s,v2),# 6 to 11))
paste(s,v3), # 12 to 17
paste(s,v4), # 18, 23
paste(s,v5) # 24 to 29
))
links = as.data.frame(matrix(c(
0, 1, 242, # Each row represents a link. The first number
1, 2, 178, # the second number represents the node connected to.
2, 3, 79,
3, 4, 42,
4, 5, 42,
6, 7, 403, # Each row represents a link. The first number
7, 8, 214, # the second number represents the node connected to.
8, 9, 103,
9, 10, 56,
10, 11, 53,
12, 13, 916, # Each row represents a link. The first number
13, 14, 431, # the second number represents the node connected to.
14, 15, 90,
15, 16, 38,
16, 17, 37,
18, 19, 933, # Each row represents a link. The first number
19, 20, 482, # the second number represents the node connected to.
20, 21, 57,
21, 22, 27,
22, 23, 7,
24, 25, 929, # Each row represents a link. The first number
25, 26, 498, # the second number represents the node connected to.
26, 27, 35,
27, 28, 10,
28, 29, 6
),# The third number is the value of the node
byrow = TRUE, ncol = 3))
names(links) = c("source", "target", "value")
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 17, nodeWidth = 17, iterations = 0)
#--------------------------------------------------------------------
library(networkD3)
library(dplyr)
# Make a connection data frame
links <- data.frame(
source=c("group_A","group_A", "group_B", "group_C", "group_C", "group_E"),
target=c("group_C","group_D", "group_E", "group_F", "group_G", "group_H"),
value=c(2,3, 2, 3, 1, 3)
)
s = c("Year: ", "Applicants\n: ", "Wrote exam: ", "Interviewed: ", "Qualified: ",
"offers: ")
v1 = c(2000, 242, 178, 79,42, 42)
v2 = c(2001, 403, 214, 103, 56, 53)
v3 = c(2002, 916, 431, 90, 38, 37)
v4 = c(2003, 933, 482, 57, 27, 7)
v5 = c(2004, 929, 498, 35, 10, 6)
nodes = data.frame("name" =
c(paste(s,v1), # Node 0 to 5
paste(s,v2),# 6 to 11))
paste(s,v3), # 12 to 17
paste(s,v4), # 18, 23
paste(s,v5) # 24 to 29
))
links = as.data.frame(matrix(c(
0, 1, 242, # Each row represents a link. The first number
1, 2, 178, # the second number represents the node connected to.
2, 3, 79,
3, 4, 42,
4, 5, 42,
6, 7, 403, # Each row represents a link. The first number
7, 8, 214, # the second number represents the node connected to.
8, 9, 103,
9, 10, 56,
10, 11, 53,
12, 13, 916, # Each row represents a link. The first number
13, 14, 431, # the second number represents the node connected to.
14, 15, 90,
15, 16, 38,
16, 17, 37,
18, 19, 933, # Each row represents a link. The first number
19, 20, 482, # the second number represents the node connected to.
20, 21, 57,
21, 22, 27,
22, 23, 7,
24, 25, 929, # Each row represents a link. The first number
25, 26, 498, # the second number represents the node connected to.
26, 27, 35,
27, 28, 10,
28, 29, 6
),# The third number is the value of the node
byrow = TRUE, ncol = 3))
names(links) = c("source", "target", "value")
sankeyNetwork(Links = links, Nodes = nodes,
Source = "source", Target = "target",
Value = "value", NodeID = "name",
fontSize= 17, nodeWidth = 17, iterations = 0)
#--------------------------------------------------------------------
setwd("D:/concordia/winter21/graphical models/project")
